<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Item Input Form</title>
  <link rel="stylesheet" href="styles.css">
  <script>
      async function submitForm(event) {
          event.preventDefault(); // Prevent default form submission

          const formData = {
              itemId: document.getElementById("item-id").value,
              name: document.getElementById("name").value,
              width: parseFloat(document.getElementById("width").value),
              depth: parseFloat(document.getElementById("depth").value),
              height: parseFloat(document.getElementById("height").value),
              priority: parseInt(document.getElementById("priority").value),
              expiryDate: document.getElementById("expiry-date").value || null,
              usageLimit: parseInt(document.getElementById("usage-limit").value) || null,
              preferredZone: document.getElementById("preferred-zone").value,
          };

          try {
              const response = await fetch('http://localhost:8000/api/placement', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({
                      items: [formData],
                      containers: [
                          { containerId: 'contA', zone: 'Crew Quarters', width: 100, depth: 85, height: 200 }
                      ],
                  }),
              });

              if (response.ok) {
                  const result = await response.json();
                  console.log(result);
                  alert('Item successfully submitted!');
              } else {
                  const error = await response.json();
                  alert(`Error submitting item. ${error.detail}`);
              }
          } catch (error) {
              console.error('Error:', error);
              alert('Failed to connect to the backend.');
          }
      }
  </script>
</head>
<body>
  <div class="form-container">
      <h1>Item Input Form</h1>
      <form id="item-form" onsubmit="submitForm(event)">
          <div class="input-box">
              <label for="item-id">Item ID:</label>
              <input type="text" id="item-id" name="item-id" required>
          </div>

          <div class="input-box">
              <label for="name">Name:</label>
              <input type="text" id="name" name="name" required>
          </div>

          <div class="input-box dimensions">
              <label>Dimensions (cm):</label>
              <input type="number" id="width" name="width" placeholder="Width" min="1" required>
              <input type="number" id="depth" name="depth" placeholder="Depth" min="1" required>
              <input type="number" id="height" name="height" placeholder="Height" min="1" required>
          </div>

          <div class="input-box">
              <label for="priority">Priority (1-100):</label>
              <input type="number" id="priority" name="priority" min="1" max="100" required>
          </div>

          <div class="input-box">
              <label for="expiry-date">Expiry Date:</label>
              <input type="date" id="expiry-date" name="expiry-date">
          </div>

          <div class="input-box">
              <label for="usage-limit">Usage Limit:</label>
              <input type="number" id="usage-limit" name="usage-limit">
          </div>

          <div class="input-box">
              <label for="preferred-zone">Preferred Zone:</label>
              <select id="preferred-zone" name="preferred-zone">
                  <option value="" disabled selected>Select a zone</option>
                  <option value="Crew Quarters">Crew Quarters</option>
                  <option value="Airlock">Airlock</option>
                  <option value="Medical Bay">Medical Bay</option>
              </select>
          </div>

          <button type="submit">Submit</button>
      </form>
  </div>
</body>
</html>
